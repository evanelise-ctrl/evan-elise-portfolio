---
import MainLayout from '../layouts/MainLayout.astro';
---

<MainLayout title="Evan Elise | Creative Portfolio">
  <div class="fixed inset-0 z-0 h-screen w-screen overflow-hidden">
    <video 
      id="scroll-video" 
      muted 
      autoplay 
      loop 
      playsinline 
      webkit-playsinline
      poster="/drone-poster.png"
      preload="auto" 
      class="w-full h-full object-cover grayscale opacity-40"
    >
      <source src="/drone-road.mp4" type="video/mp4" />
    </video>
    <div class="absolute inset-0 bg-neutral-950/50"></div>
  </div>

  <main class="relative w-full">
    
    <section id="hero-track" style="height: 400vh; position: relative;">
        <div id="hero-pin" style="position: fixed; top: 0; left: 0; width: 100%; height: 100vh; display: flex; flex-direction: column; justify-content: center; padding-left: 10%; z-index: 10; pointer-events: none;">
            <div style="max-width: 1200px; pointer-events: auto;">
                <span style="color: var(--accent); font-weight: 900; text-transform: uppercase; letter-spacing: 0.3em; font-size: 14px; margin-bottom: 24px; display: block;">
                    Senior Creative Leader
                </span>
                
                <h1 style="font-size: clamp(2.5rem, 8vw, 9rem); font-weight: 900; text-transform: uppercase; line-height: 0.9; letter-spacing: -0.05em; color: white; margin: 0;">
                  Scaling <br/> 
                  <span class="text-glow" style="color: var(--accent); font-style: italic;">Brands</span> <br/>
                  Through <br/>
                  <span id="evolving-text">Videography</span>.
                </h1>
            </div>
        </div>
    </section>

<section id="featured-work" style="position: relative; z-index: 50; min-height: 100vh; background-color: black; padding: 100px 8%; border-top: 1px solid rgba(255,255,255,0.1);">
      <h2 style="font-size: 12px; font-weight: 900; text-transform: uppercase; letter-spacing: 0.3em; color: rgba(255,255,255,0.4); margin-bottom: 60px;">Featured Work</h2>
  
      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: clamp(24px, 5vw, 60px); max-width: 1600px; margin: 0 auto;">
    
        <a href="/cisco-spaces" style="text-decoration: none; color: inherit; display: block; min-width: 0;">
          <div class="group" style="cursor: pointer;">
            <div style="aspect-ratio: 16/9; border-radius: 24px; border: 1px solid rgba(255,255,255,0.1); transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1); overflow: hidden; position: relative;">
              <video autoplay muted loop playsinline class="w-full h-full object-cover opacity-80" style="transition: opacity 0.5s ease;">
                <source src="/spaces-launch.mp4" type="video/mp4" />
              </video>
              <div style="position: absolute; inset: 0; background: linear-gradient(to bottom, transparent, rgba(0,0,0,0.4));"></div>
            </div>
            <h3 style="margin-top: 24px; font-size: clamp(20px, 3vw, 26px); font-weight: 900; text-transform: uppercase; letter-spacing: -0.02em;">Cisco Spaces</h3>
            <p style="font-size: 11px; color: rgba(255,255,255,0.4); text-transform: uppercase; letter-spacing: 0.2em; margin-top: 8px; font-weight: 700;">Creative Producer • Digital Strategy</p>
          </div>
        </a>

<a href="/cisco-secure" style="text-decoration: none; color: inherit; display: block; min-width: 0;">
          <div class="group" style="cursor: pointer;">
            <div style="aspect-ratio: 16/9; border-radius: 24px; border: 1px solid rgba(255,255,255,0.1); transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1); overflow: hidden; position: relative;">
              <iframe 
                src="https://player.vimeo.com/video/1164128684?badge=0&autopause=0&player_id=0&app_id=58479&autoplay=1&muted=1&loop=1&background=1" 
                frameborder="0" 
                allow="autoplay; fullscreen; picture-in-picture" 
                style="position:absolute;top:0;left:0;width:100%;height:100%; pointer-events: none;" 
                title="Cisco Secure Preview">
              </iframe>
              <div style="position: absolute; inset: 0; background: linear-gradient(to bottom, transparent, rgba(0,0,0,0.4));"></div>
            </div>
            <h3 style="margin-top: 24px; font-size: clamp(20px, 3vw, 26px); font-weight: 900; text-transform: uppercase; letter-spacing: -0.02em;">Cisco Secure</h3>
            <p style="font-size: 11px; color: rgba(255,255,255,0.4); text-transform: uppercase; letter-spacing: 0.2em; margin-top: 8px; font-weight: 700;">Creative Lead • Brand Integration</p>
          </div>
        </a>

        <a href="/e3-refillery" style="text-decoration: none; color: inherit; display: block; min-width: 0;">
          <div class="group" style="cursor: pointer;">
            <div style="aspect-ratio: 16/9; border-radius: 24px; border: 1px solid rgba(255,255,255,0.1); transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1); overflow: hidden; position: relative; background: #0a0a0a;">
              <img src="/e3-hero.png" alt="e3 Refillery Branding" class="w-full h-full object-cover opacity-60" style="transition: opacity 0.5s ease;" />
              <div style="position: absolute; inset: 0; background: linear-gradient(to bottom, transparent, rgba(0,0,0,0.4));"></div>
            </div>
            <h3 style="margin-top: 24px; font-size: clamp(20px, 3vw, 26px); font-weight: 900; text-transform: uppercase; letter-spacing: -0.02em;">e3 Refillery</h3>
            <p style="font-size: 11px; color: rgba(255,255,255,0.4); text-transform: uppercase; letter-spacing: 0.2em; margin-top: 8px; font-weight: 700;">Design • Development • Brand Strategy</p>
          </div>
        </a>

      </div>
    </section>
  </main>
</MainLayout>

<script>
  const video = document.getElementById('scroll-video');
  const evolvingText = document.getElementById('evolving-text');
  const heroPin = document.getElementById('hero-pin');
  const heroTrack = document.getElementById('hero-track');
  
  const words = [
    "Videography", 
    "Direction", 
    "Photography", 
    "Strategy", 
    "Design", 
    "Multimedia", 
    "Storytelling", 
    "Development"
  ];
  
  let targetTime = 0;
  let currentTime = 0;
  let lastWordIndex = 0;

  window.addEventListener('scroll', () => {
    const scrollPos = window.scrollY;
    const windowHeight = window.innerHeight;
    const trackHeight = heroTrack.offsetHeight;
    const totalDocHeight = document.documentElement.scrollHeight - windowHeight;

    if (video && video.duration) {
      targetTime = video.duration * (scrollPos / totalDocHeight);
    }

    const wordIndex = Math.floor(scrollPos / 300) % words.length;
    
    if (evolvingText && wordIndex !== lastWordIndex) {
      lastWordIndex = wordIndex;
      evolvingText.style.opacity = "0";
      setTimeout(() => {
        evolvingText.innerText = words[wordIndex];
        evolvingText.style.opacity = "1";
      }, 150);
    }

    const releasePoint = trackHeight - windowHeight;

    if (scrollPos >= releasePoint) {
      heroPin.style.position = 'absolute';
      heroPin.style.top = releasePoint + 'px';
    } else {
      heroPin.style.position = 'fixed';
      heroPin.style.top = '0';
    }
  });

  function render() {
    currentTime += (targetTime - currentTime) * 0.1;
    if (video) video.currentTime = currentTime;
    requestAnimationFrame(render);
  }
  requestAnimationFrame(render);
</script>

<style>
  #evolving-text {
    display: inline-block;
    transition: opacity 0.2s ease;
  }
  .text-glow {
    text-shadow: 0 0 50px rgba(255, 0, 128, 0.4);
  }
  /* HOVER EFFECTS */
  .group:hover video, .group:hover img {
    opacity: 1 !important;
    transform: scale(1.05);
  }
  .group:hover .view-project-label {
    opacity: 1 !important;
  }
  .group div {
    transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
  }
</style>