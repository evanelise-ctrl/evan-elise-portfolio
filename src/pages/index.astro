---
import MainLayout from '../layouts/MainLayout.astro';
---

<MainLayout title="Evan Elise | Creative Portfolio">
  <div class="fixed inset-0 z-0 h-screen w-screen overflow-hidden">
    <video 
      id="scroll-video" 
      muted 
      autoplay 
      loop 
      playsinline 
      webkit-playsinline
      poster="/drone-poster.png"
      preload="auto" 
      class="w-full h-full object-cover grayscale opacity-40"
    >
      <source src="/drone-road.mp4" type="video/mp4" />
    </video>
    <div class="absolute inset-0 bg-neutral-950/50"></div>
  </div>

  <main class="relative w-full">
    
    <section id="hero-track" style="height: 400vh; position: relative;">
        <div id="hero-pin" style="position: fixed; top: 0; left: 0; width: 100%; height: 100vh; display: flex; flex-direction: column; justify-content: center; padding-left: 10%; z-index: 10; pointer-events: none;">
            <div style="max-width: 1200px; pointer-events: auto;">
                <span style="color: var(--accent); font-weight: 900; text-transform: uppercase; letter-spacing: 0.3em; font-size: 14px; margin-bottom: 24px; display: block;">
                    Senior Creative Leader
                </span>
                
                <h1 style="font-size: clamp(2.5rem, 8vw, 9rem); font-weight: 900; text-transform: uppercase; line-height: 0.9; letter-spacing: -0.05em; color: white; margin: 0;">
                  Scaling <br/> 
                  <span class="text-glow" style="color: var(--accent); font-style: italic;">Brands</span> <br/>
                  Through <br/>
                  <span id="evolving-text">Videography</span>.
                </h1>
            </div>
        </div>
    </section>

    <section id="featured-work" style="position: relative; z-index: 50; min-height: 100vh; background-color: black; padding: 100px 10%; border-top: 1px solid rgba(255,255,255,0.1);">
      <h2 style="font-size: 12px; font-weight: 900; text-transform: uppercase; letter-spacing: 0.3em; color: rgba(255,255,255,0.4); margin-bottom: 60px;">Featured Work</h2>
  
      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 60px; max-width: 1400px;">
    
        <a href="/cisco-spaces" style="text-decoration: none; color: inherit; display: block;">
          <div class="group" style="cursor: pointer;">
            <div style="aspect-ratio: 16/9; border-radius: 24px; border: 1px solid rgba(255,255,255,0.1); background-image: url('/spaces-thumb.png'); background-size: cover; background-position: center; transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1); overflow: hidden;" onmouseover="this.style.borderColor='var(--accent)'; this.style.transform='scale(1.02)';" onmouseout="this.style.borderColor='rgba(255,255,255,0.1)'; this.style.transform='scale(1)';">
              <div style="width: 100%; height: 100%; background: linear-gradient(to bottom, transparent, rgba(0,0,0,0.3));"></div>
            </div>
            <h3 style="margin-top: 24px; font-size: 24px; font-weight: 700; text-transform: uppercase;">Cisco Spaces</h3>
            <p style="font-size: 12px; color: rgba(255,255,255,0.4); text-transform: uppercase; letter-spacing: 0.1em; margin-top: 8px;">Creative Producer • Digital Strategy</p>
          </div>
        </a>

        <a href="/e3-refillery" style="text-decoration: none; color: inherit; display: block; margin-top: 50px;">
          <div class="group" style="cursor: pointer;">
            <div style="aspect-ratio: 16/9; border-radius: 24px; border: 1px solid rgba(255,255,255,0.1); background: rgba(255,255,255,0.05); transition: border-color 0.3s ease;" onmouseover="this.style.borderColor='var(--accent)'" onmouseout="this.style.borderColor='rgba(255,255,255,0.1)'">
              <div style="display: flex; height: 100%; align-items: center; justify-content: center; color: rgba(255,255,255,0.2); text-transform: uppercase; font-size: 10px; letter-spacing: 0.2em;">
                View Project
              </div>
            </div>
            <h3 style="margin-top: 24px; font-size: 24px; font-weight: 700; text-transform: uppercase;">e3 Refillery</h3>
            <p style="font-size: 12px; color: rgba(255,255,255,0.4); text-transform: uppercase; letter-spacing: 0.1em; margin-top: 8px;">Design • Development • Brand Strategy</p>
          </div>
        </a>

      </div>
    </section>
  </main>
</MainLayout>

<script>
  const video = document.getElementById('scroll-video');
  const evolvingText = document.getElementById('evolving-text');
  const heroPin = document.getElementById('hero-pin');
  const heroTrack = document.getElementById('hero-track');
  
  // Single words as requested
  const words = [
    "Videography", 
    "Direction", 
    "Photography", 
    "Strategy", 
    "Design", 
    "Multimedia", 
    "Storytelling", 
    "Development"
  ];
  
  let targetTime = 0;
  let currentTime = 0;
  let lastWordIndex = 0;

  window.addEventListener('scroll', () => {
    const scrollPos = window.scrollY;
    const windowHeight = window.innerHeight;
    const trackHeight = heroTrack.offsetHeight;
    const totalDocHeight = document.documentElement.scrollHeight - windowHeight;

    if (video && video.duration) {
      targetTime = video.duration * (scrollPos / totalDocHeight);
    }

    const wordIndex = Math.floor(scrollPos / 300) % words.length;
    
    if (evolvingText && wordIndex !== lastWordIndex) {
      lastWordIndex = wordIndex;
      evolvingText.style.opacity = "0";
      setTimeout(() => {
        evolvingText.innerText = words[wordIndex];
        evolvingText.style.opacity = "1";
      }, 150);
    }

    const releasePoint = trackHeight - windowHeight;

    if (scrollPos >= releasePoint) {
      heroPin.style.position = 'absolute';
      heroPin.style.top = releasePoint + 'px';
    } else {
      heroPin.style.position = 'fixed';
      heroPin.style.top = '0';
    }
  });

  function render() {
    currentTime += (targetTime - currentTime) * 0.1;
    if (video) video.currentTime = currentTime;
    requestAnimationFrame(render);
  }
  requestAnimationFrame(render);
</script>

<style>
  #evolving-text {
    display: inline-block;
    transition: opacity 0.2s ease;
  }
  .text-glow {
    text-shadow: 0 0 50px rgba(255, 0, 128, 0.4);
  }
</style>